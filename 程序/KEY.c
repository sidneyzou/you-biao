/**********************键盘函数文件*********************************
*  晶振:11.0592MHZ
******************************************************************/

/**********************包含文件*******************/
#include "KEY.h"
#include "PWM.h"
/*********************************全局变初始化***********************************/  

/******************************************************************************/
/* 函数名称  : KEY_Scan                                                       */
/* 函数描述  : KEY扫描                                                        */
/* 输入参数  : Void                                                           */
/* 参数描述  : 无                                                             */
/* 返回值    : 无                                                             */
/******************************************************************************/	
void KEY_Scan(void)
{
	if(KEY_1 == 0)//up
	{
		KEY_Delay(10);
		if(KEY_1 == 0)
		{
			pwm_set_0 = 1000;
		}
		while(KEY_1 != 1);
	}
	if(KEY_2 == 0)//left
	{
		KEY_Delay(10);
		if(KEY_2 == 0)
		{
			pwm_set_0 = 2000;
		}
		while(KEY_2 != 1);
	}
	if(KEY_3 == 0)//right
	{
		KEY_Delay(10);
		if(KEY_3 == 0)
		{
			pwm_set_0 = 5000;
		}
		while(KEY_3 != 1);
	}
	if(KEY_4 == 0)//down
	{
		KEY_Delay(10);
		if(KEY_4 == 0)
		{
			pwm_set_0 = 9000;
		}
		while(KEY_4 != 1);
	}
}

/******************************************************************************/
/* 函数名称  : KEY_Delay                                                      */
/* 函数描述  : KEY延时                                                        */
/* 输入参数  : Void                                                           */
/* 参数描述  : 无                                                             */
/* 返回值    : 无                                                             */
/******************************************************************************/
void KEY_Delay(uint xms)
{
	uchar i;
	for( ; xms > 0; xms--)
		for(i = 110; i > 0; i--);
}